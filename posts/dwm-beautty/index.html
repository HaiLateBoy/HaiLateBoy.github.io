<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>dwm 美化 - Masimaro&#39;s blog</title><meta name="Description" content="这是我用于记录日常和学习的小站"><meta property="og:title" content="dwm 美化" />
<meta property="og:description" content="在之前的博客中，我们将arch linux这个系统进行了一些美化，当然也是仅仅做到能看这个地步，要说跟网上其他那些惊艳的特效对比，肯定是不如的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://HaiLateBoy.github.io/posts/dwm-beautty/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-23T21:45:40+00:00" />
<meta property="article:modified_time" content="2024-01-22T22:12:13+08:00" /><meta property="og:site_name" content="Masimaro&#39;s blog" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="dwm 美化"/>
<meta name="twitter:description" content="在之前的博客中，我们将arch linux这个系统进行了一些美化，当然也是仅仅做到能看这个地步，要说跟网上其他那些惊艳的特效对比，肯定是不如的"/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://HaiLateBoy.github.io/posts/dwm-beautty/" /><link rel="prev" href="http://HaiLateBoy.github.io/posts/2022-books/" /><link rel="next" href="http://HaiLateBoy.github.io/posts/vim-tutorial-1/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "dwm 美化",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/HaiLateBoy.github.io\/posts\/dwm-beautty\/"
        },"genre": "posts","keywords": "arch Linux, dwm, 美化, 配置","wordcount":  3248 ,
        "url": "http:\/\/HaiLateBoy.github.io\/posts\/dwm-beautty\/","datePublished": "2022-02-23T21:45:40+00:00","dateModified": "2024-01-22T22:12:13+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Masimaro"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Masimaro&#39;s blog">My cool site</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="文章列表"> 文章 </a><a class="menu-item" href="/tags/" title="标签"> 标签 </a><a class="menu-item" href="/categories/" title="分类"> 分类 </a><a class="menu-item" href="/about" title="关于本站"> 关于 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Masimaro&#39;s blog">My cool site</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="文章列表">文章</a><a class="menu-item" href="/tags/" title="标签">标签</a><a class="menu-item" href="/categories/" title="分类">分类</a><a class="menu-item" href="/about" title="关于本站">关于</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">dwm 美化</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://www.masimaro.xyz" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Masimaro</a></span>&nbsp;<span class="post-category">included in <a href="/categories/arch-linux/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>arch Linux</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-02-23">2022-02-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;3248 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;7 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="true">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#dwm美化">dwm美化</a>
      <ul>
        <li><a href="#相关插件安装">相关插件安装</a></li>
        <li><a href="#设置状态条">设置状态条</a></li>
        <li><a href="#dwm-其他部分修改">dwm 其他部分修改</a></li>
        <li><a href="#针对终端和程序启动器的简单配置">针对终端和程序启动器的简单配置</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>在之前的博客中，我们将arch linux这个系统进行了一些美化，当然也是仅仅做到能看这个地步，要说跟网上其他那些惊艳的特效对比，肯定是不如的。但是我一直秉持一个观点，美化应该适可而止，只要不是丑的你不想打开，不想用，就已经足够了。所以我们不再对系统本身做其他美化，下面开始进行dwm本身的美化</p>
<!-- raw HTML omitted -->
<h2 id="dwm美化">dwm美化</h2>
<h3 id="相关插件安装">相关插件安装</h3>
<p>上一篇博文中，为了解决从登陆管理器进入dwm无法加载背景图片的问题，我们已经安装了<code>dwm</code>的<code>autostart</code>插件，为了进一步的美化，这里再安装几个插件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">wget https://dwm.suckless.org/patches/alpha/dwm-alpha-20201019-61bb8b2.diff <span class="c1"># 半透明</span>
</span></span><span class="line"><span class="cl">wget https://dwm.suckless.org/patches/barpadding/dwm-barpadding-20211020-a786211.diff  <span class="c1">#适当添加标题栏间距</span>
</span></span><span class="line"><span class="cl">wget https://dwm.suckless.org/patches/uselessgap/dwm-uselessgap-20211119-58414bee958f2.diff <span class="c1">#dwm窗口间添加边距 </span>
</span></span></code></pre></div><p>使用<code>patch</code> 命令之后，重新编译安装。重启之后发现dwm已经变样了
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/dwm-beautty/1.png"
        data-srcset="/dwm-beautty/1.png, /dwm-beautty/1.png 1.5x, /dwm-beautty/1.png 2x"
        data-sizes="auto"
        alt="/dwm-beautty/1.png"
        title="打包之后的dwm" /></p>
<h3 id="设置状态条">设置状态条</h3>
<p>根据dwm官方的说法，使用<code>xsetroot -name</code> 来设置标题栏的内容，比如说我们使用如下命令来打印当前用户</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">xsetroot -name <span class="k">$(</span>whoami<span class="k">)</span>
</span></span></code></pre></div><p>运行之后发现dwm的右上角显示的内容变了
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/dwm-beautty/2.png"
        data-srcset="/dwm-beautty/2.png, /dwm-beautty/2.png 1.5x, /dwm-beautty/2.png 2x"
        data-sizes="auto"
        alt="/dwm-beautty/2.png"
        title="设置状态条" /></p>
<p>知道原理之后我们只需要在dwm启动的时候执行相关脚本，获取相关数据并刷新即可，例如可以使用如下命令实现每秒刷新时间</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">while</span> <span class="nb">true</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    xsetroot -name <span class="s2">&#34;</span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    sleep 1s
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></div><p>根据这个我们可以写一些脚本，获取各个状态，然后使用 <code>xsetroot -name</code> 来输出这些状态。但是这里我并不打算完全使用脚本来定义输出，而是使用dwmblocks来管理这个状态栏，输出各种状态。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone https://github.com/torrinfail/dwmblocks.git
</span></span></code></pre></div><p>进到对应目录中，编译并安装它</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">make
</span></span><span class="line"><span class="cl">sudo make clean install
</span></span></code></pre></div><p>安装完成之后我们在<code>autostart</code> 脚本末尾添加一行代码中启动<code>dwmblocks</code>程序</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">dwmblocks <span class="p">&amp;</span>
</span></span></code></pre></div><p>重启dwm之后可以看到变化,原来输出的日期变为了内存使用情况加日期的显示了
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/dwm-beautty/3.png"
        data-srcset="/dwm-beautty/3.png, /dwm-beautty/3.png 1.5x, /dwm-beautty/3.png 2x"
        data-sizes="auto"
        alt="/dwm-beautty/3.png"
        title="dwmblocks" /></p>
<p>进入到<code>dwmblocks</code>的目录中，会发现一个<code>blocks.def.h</code>和<code>blocks.h</code>的文件，这里我们删掉前一个文件，后续想要修改显示内容可以修改<code>blocks.h</code>文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//Modify this file to change what commands output to your statusbar, and recompile using the make command.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="k">const</span> <span class="n">Block</span> <span class="n">blocks</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="cm">/*Icon*/</span> <span class="cm">/*Command*/</span>  <span class="cm">/*Update Interval*/</span> <span class="cm">/*Update Signal*/</span>
</span></span><span class="line"><span class="cl"> <span class="p">{</span><span class="s">&#34;Mem:&#34;</span><span class="p">,</span> <span class="s">&#34;free -h | awk &#39;/^Mem/ { print $3</span><span class="se">\&#34;</span><span class="s">/</span><span class="se">\&#34;</span><span class="s">$2 }&#39; | sed s/i//g&#34;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> <span class="p">{</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;date &#39;+%b %d (%a) %I:%M%p&#39;&#34;</span><span class="p">,</span>     <span class="mi">5</span><span class="p">,</span>  <span class="mi">0</span><span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//sets delimeter between status commands. NULL character (&#39;\0&#39;) means no delimeter.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="kt">char</span> <span class="n">delim</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34; | &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">delimLen</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span></span></code></pre></div><p>其中<code>blocks</code> 数组是用来保存要获取的状态，每组状态用一个数组成员，其中每个成员又是一个字符串数组，每个部分分别代表了：状态前显示的图标，获取状态的命令，状态刷新的时间，更新的标志; 变量<code>delim</code> 表示各个状态之间的分割符</p>
<p>这样我们可以讲获取状态和显示状态分离开来，实现模块化，后续可以将不同状态组织成不同模块，便于管理脚本</p>
<p>这里我们计划输出网速、内存使用占比、cpu使用占比、音量、电量、亮度、时间</p>
<p>这里我在<code>dwmblocks</code> 源码目录中创建一个scripts的目录用来存储获取这些状态的脚本,分别命名为: wlan.sh、memory.sh、cpu.sh、volume.sh、power.sh、light.sh、clock.sh</p>
<p>然后修改<code>blocks</code>变量，通过调用这些脚本获取状态</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//Modify this file to change what commands output to your statusbar, and recompile using the make command.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="k">const</span> <span class="n">Block</span> <span class="n">blocks</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/*Icon*/</span>        <span class="cm">/*Command*/</span>             <span class="cm">/*Update Interval*/</span>     <span class="cm">/*Update Signal*/</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="s">&#34; &#34;</span><span class="p">,</span> <span class="s">&#34;~/scripts/wlan.sh&#34;</span><span class="p">,</span>     <span class="mi">1</span><span class="p">,</span>              <span class="mi">0</span><span class="p">},</span> <span class="c1">//网速
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">{</span><span class="s">&#34; &#34;</span><span class="p">,</span> <span class="s">&#34;~/scripts/cpu.sh&#34;</span><span class="p">,</span>      <span class="mi">5</span><span class="p">,</span>              <span class="mi">0</span><span class="p">},</span> <span class="c1">//cpu占用率
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">{</span><span class="s">&#34; &#34;</span><span class="p">,</span> <span class="s">&#34;~/scripts/memory.sh&#34;</span><span class="p">,</span>   <span class="mi">3</span><span class="p">,</span>              <span class="mi">0</span><span class="p">},</span> <span class="c1">//内存占用率
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">{</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;~/scripts/volume.sh&#34;</span><span class="p">,</span>     <span class="mi">0</span><span class="p">,</span>              <span class="mi">11</span><span class="p">},</span> <span class="c1">//音量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">{</span><span class="s">&#34;ﯦ &#34;</span><span class="p">,</span> <span class="s">&#34;~/scripts/backlight.sh&#34;</span><span class="p">,</span>        <span class="mi">0</span><span class="p">,</span>              <span class="mi">11</span><span class="p">},</span> <span class="c1">//亮度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">{</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;~/scripts/battery.sh&#34;</span><span class="p">,</span>    <span class="mi">2</span><span class="p">,</span>              <span class="mi">0</span><span class="p">},</span> <span class="c1">//电量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">{</span><span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;~/scripts/date.sh&#34;</span><span class="p">,</span>      <span class="mi">1</span><span class="p">,</span>              <span class="mi">0</span><span class="p">},</span> <span class="c1">//时间
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//sets delimeter between status commands. NULL character (&#39;\0&#39;) means no delimeter.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="kt">char</span> <span class="n">delim</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34; | &#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="kt">int</span> <span class="n">delimLen</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span></span></code></pre></div><p>接着在用户目录下新建一个<code>scripts</code> 目录，并新建这些脚本文件</p>
<h4 id="backlightsh">backlight.sh</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">xbacklight -get
</span></span></code></pre></div><p>要使用<code>xbacklight</code> 这个工具需要事先安装<code>acpilight</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo pacman -S acpilight
</span></span><span class="line"><span class="cl">sudo gpasswd video -a 用户名 <span class="c1"># 将当前用户添加到video实现免root控制亮度</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 获取当前亮度</span>
</span></span><span class="line"><span class="cl">xbacklight -get
</span></span><span class="line"><span class="cl"><span class="c1"># 设置亮度</span>
</span></span><span class="line"><span class="cl">xbacklight -set <span class="m">70</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 增加亮度</span>
</span></span><span class="line"><span class="cl">xbacklight -inc <span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 减少亮度</span>
</span></span><span class="line"><span class="cl">xbacklight -dec <span class="m">10</span>
</span></span></code></pre></div><h4 id="batterysh">battery.sh</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>get_battery_combined_percent<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">total_charge</span><span class="o">=</span><span class="k">$(</span>expr <span class="k">$(</span>acpi -b <span class="p">|</span> awk <span class="s1">&#39;{print $4}&#39;</span> <span class="p">|</span> grep -Eo <span class="s2">&#34;[0-9]+&#34;</span> <span class="p">|</span> paste -sd+ <span class="p">|</span> bc<span class="k">))</span>
</span></span><span class="line"><span class="cl">    <span class="nv">battery_number</span><span class="o">=</span><span class="k">$(</span>acpi -b <span class="p">|</span> wc -l<span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">percent</span><span class="o">=</span><span class="k">$(</span>expr <span class="nv">$total_charge</span> / <span class="nv">$battery_number</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span> -le <span class="m">33</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="k">$(</span>acpi -b <span class="p">|</span> grep --quit Discharging<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">           <span class="nb">printf</span> <span class="s2">&#34; %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">           <span class="nb">printf</span> <span class="s2">&#34; %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span> -ge <span class="m">33</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span> -le <span class="m">66</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="k">$(</span>acpi -b <span class="p">|</span> grep --quit Discharging<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            print <span class="s2">&#34; %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="nb">printf</span> <span class="s2">&#34; %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="k">$(</span>acpi -b <span class="p">|</span> grep --quit Discharging<span class="k">)</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">            <span class="nb">printf</span> <span class="s2">&#34; %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">            <span class="nb">printf</span> <span class="s2">&#34; %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$percent</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">fi</span>
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">get_battery_combined_percent
</span></span></code></pre></div><h4 id="cpush">cpu.sh</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/sh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1">#脚本功能描述：依据/proc/stat文件获取并计算CPU使用率</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1">#CPU时间计算公式：CPU_TIME=user+system+nice+idle+iowait+irq+softirq</span>
</span></span><span class="line"><span class="cl"><span class="c1">#CPU使用率计算公式：cpu_usage=(idle2-idle1)/(cpu2-cpu1)*100</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#默认时间间隔</span>
</span></span><span class="line"><span class="cl"><span class="nv">TIME_INTERVAL</span><span class="o">=</span><span class="m">5</span>
</span></span><span class="line"><span class="cl"><span class="nv">time</span><span class="o">=</span><span class="k">$(</span>date <span class="s2">&#34;+%Y-%m-%d %H:%M:%S&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">LAST_CPU_INFO</span><span class="o">=</span><span class="k">$(</span>cat /proc/stat <span class="p">|</span> grep -w cpu <span class="p">|</span> awk <span class="s1">&#39;{print $2,$3,$4,$5,$6,$7,$8}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">LAST_SYS_IDLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$LAST_CPU_INFO</span> <span class="p">|</span> awk <span class="s1">&#39;{print $4}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">LAST_TOTAL_CPU_T</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$LAST_CPU_INFO</span> <span class="p">|</span> awk <span class="s1">&#39;{print $1+$2+$3+$4+$5+$6+$7}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">sleep <span class="si">${</span><span class="nv">TIME_INTERVAL</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="nv">NEXT_CPU_INFO</span><span class="o">=</span><span class="k">$(</span>cat /proc/stat <span class="p">|</span> grep -w cpu <span class="p">|</span> awk <span class="s1">&#39;{print $2,$3,$4,$5,$6,$7,$8}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">NEXT_SYS_IDLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$NEXT_CPU_INFO</span> <span class="p">|</span> awk <span class="s1">&#39;{print $4}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">NEXT_TOTAL_CPU_T</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$NEXT_CPU_INFO</span> <span class="p">|</span> awk <span class="s1">&#39;{print $1+$2+$3+$4+$5+$6+$7}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#系统空闲时间</span>
</span></span><span class="line"><span class="cl"><span class="nv">SYSTEM_IDLE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">NEXT_SYS_IDLE</span><span class="si">}</span> <span class="si">${</span><span class="nv">LAST_SYS_IDLE</span><span class="si">}</span> <span class="p">|</span> awk <span class="s1">&#39;{print $1-$2}&#39;</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="c1">#CPU总时间</span>
</span></span><span class="line"><span class="cl"><span class="nv">TOTAL_TIME</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">NEXT_TOTAL_CPU_T</span><span class="si">}</span> <span class="si">${</span><span class="nv">LAST_TOTAL_CPU_T</span><span class="si">}</span> <span class="p">|</span> awk <span class="s1">&#39;{print $1-$2}&#39;</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nv">CPU_USAGE</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">SYSTEM_IDLE</span><span class="si">}</span> <span class="si">${</span><span class="nv">TOTAL_TIME</span><span class="si">}</span> <span class="p">|</span> awk <span class="s1">&#39;{printf &#34;%.2f&#34;, 100-$1/$2*100}&#39;</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">CPU_USAGE</span><span class="si">}</span><span class="s2">%&#34;</span>
</span></span></code></pre></div><h4 id="datesh">date.sh</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">date <span class="s1">&#39;+ %Y年%m月%d日 %H:%M:%S&#39;</span>
</span></span></code></pre></div><h4 id="memorysh">memory.sh</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">memfree</span><span class="o">=</span><span class="k">$(($(</span>grep -m1 <span class="s1">&#39;MemAvailable:&#39;</span> /proc/meminfo <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span><span class="k">)))</span>
</span></span><span class="line"><span class="cl"><span class="nv">memtotal</span><span class="o">=</span><span class="k">$(($(</span>grep -m1 <span class="s1">&#39;MemTotal:&#39;</span> /proc/meminfo <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span><span class="k">)))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">useage</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;scale=2;100 * (</span><span class="nv">$memfree</span><span class="s2">/</span><span class="nv">$memtotal</span><span class="s2">)&#34;</span> <span class="p">|</span> bc<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="nv">$useage</span><span class="s2">%&#34;</span>
</span></span></code></pre></div><h4 id="volumesh">volume.sh</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">VOL</span><span class="o">=</span><span class="k">$(</span>amixer get Master <span class="p">|</span> tail -n1 <span class="p">|</span> sed -r <span class="s2">&#34;s/.*\[(.*)%\].*/\1/&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VOL</span><span class="s2">&#34;</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">printf</span> <span class="s2">&#34;ﱝ  &#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VOL</span><span class="s2">&#34;</span> -gt <span class="m">0</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VOL</span><span class="s2">&#34;</span> -le <span class="m">33</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    print <span class="s2">&#34; %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$VOL</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VOL</span><span class="s2">&#34;</span> -gt <span class="m">33</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VOL</span><span class="s2">&#34;</span> -le <span class="m">66</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    print <span class="s2">&#34;墳 %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$VOL</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    print <span class="s2">&#34; %s%%&#34;</span> <span class="s2">&#34;</span><span class="nv">$VOL</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><h4 id="wlansh">wlan.sh</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/zsh
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">function</span> get_bytes <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">interface</span><span class="o">=</span><span class="k">$(</span>ip route get 8.8.8.8 2&gt;/dev/null <span class="p">|</span> awk <span class="s1">&#39;{print $5}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nv">line</span><span class="o">=</span><span class="k">$(</span>grep <span class="nv">$interface</span> /proc/net/dev <span class="p">|</span> cut -d <span class="s1">&#39;:&#39;</span> -f2 <span class="p">|</span> awk <span class="s1">&#39;{print &#34;received_bytes=&#34;$1, &#34;transmitted_bytes=&#34;$9}&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">eval</span> <span class="nv">$line</span>
</span></span><span class="line"><span class="cl">    <span class="nv">now</span><span class="o">=</span><span class="k">$(</span>date +%s%N<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> get_velocity <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">value</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">    <span class="nv">old_value</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl">    <span class="nv">now</span><span class="o">=</span><span class="nv">$3</span>
</span></span><span class="line"><span class="cl">    <span class="nv">timediff</span><span class="o">=</span><span class="k">$((</span><span class="nv">$now</span> <span class="o">-</span> <span class="nv">$old_time</span><span class="k">))</span>
</span></span><span class="line"><span class="cl">    <span class="nv">velKB</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;1000000000*(</span><span class="nv">$value</span><span class="s2">-</span><span class="nv">$old_value</span><span class="s2">)/1024/</span><span class="nv">$timediff</span><span class="s2">&#34;</span> <span class="p">|</span> bc<span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">test</span> <span class="s2">&#34;</span><span class="nv">$velKB</span><span class="s2">&#34;</span> -gt <span class="m">1024</span>
</span></span><span class="line"><span class="cl">    <span class="k">then</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;scale=2; </span><span class="nv">$velKB</span><span class="s2">/1024&#34;</span> <span class="p">|</span>bc<span class="k">)</span>MB/s
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="nb">echo</span> <span class="si">${</span><span class="nv">velKB</span><span class="si">}</span>KB/s
</span></span><span class="line"><span class="cl">    <span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">get_bytes
</span></span><span class="line"><span class="cl"><span class="nv">old_received_bytes</span><span class="o">=</span><span class="nv">$received_bytes</span>
</span></span><span class="line"><span class="cl"><span class="nv">old_transmitted_bytes</span><span class="o">=</span><span class="nv">$transmitted_bytes</span>
</span></span><span class="line"><span class="cl"><span class="nv">old_time</span><span class="o">=</span><span class="nv">$now</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">get_bytes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">vel_recv</span><span class="o">=</span><span class="k">$(</span>get_velocity <span class="nv">$received_bytes</span> <span class="nv">$old_received_bytes</span> <span class="nv">$now</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">vel_trans</span><span class="o">=</span><span class="k">$(</span>get_velocity <span class="nv">$transmitted_bytes</span> <span class="nv">$old_transmitted_bytes</span> <span class="nv">$now</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$vel_recv</span><span class="s2">⬇</span><span class="nv">$vel_trans</span><span class="s2">⬆&#34;</span>
</span></span></code></pre></div><p>这些脚本主要取材自B站的UP主 <em>TheCW</em> ,脚本的地址如下：
<a href="https://github.com/theniceboy/scripts" target="_blank" rel="noopener noreffer ">dwm status scripts</a></p>
<p>也有部分参考了这个地址 <a href="https://gitlab.com/dwt1/dwmblocks-distrotube" target="_blank" rel="noopener noreffer ">dt scripts</a></p>
<p>在上述脚本中有部分图标可能显示为乱码，这是因为读者本地没有安装对应的字体，这些图标都是我在<code>nerd font</code> 官网上找到的：<a href="https://www.nerdfonts.com/cheat-sheet" target="_blank" rel="noopener noreffer ">Nerd Font Icons</a></p>
<p>做完这些修改后重新编译<code>dwmblocks</code> 然后重启<code>dwm</code>就可以看到效果了</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/dwm-beautty/4.png"
        data-srcset="/dwm-beautty/4.png, /dwm-beautty/4.png 1.5x, /dwm-beautty/4.png 2x"
        data-sizes="auto"
        alt="/dwm-beautty/4.png"
        title="状态栏" /></p>
<h3 id="dwm-其他部分修改">dwm 其他部分修改</h3>
<p>这部分的修改主要在dwm目录的<code>config.f</code>
1.修改左侧图标</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">tags</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;ﱘ&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">};</span>
</span></span></code></pre></div><p>2.修改dwm配色</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">col_gray1</span><span class="p">[]</span>       <span class="o">=</span> <span class="s">&#34;#222222&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">col_gray2</span><span class="p">[]</span>       <span class="o">=</span> <span class="s">&#34;#444444&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">col_gray3</span><span class="p">[]</span>       <span class="o">=</span> <span class="s">&#34;#bbbbbb&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">col_gray4</span><span class="p">[]</span>       <span class="o">=</span> <span class="s">&#34;#ffffff&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="n">col_cyan</span><span class="p">[]</span>        <span class="o">=</span> <span class="s">&#34;#37374f&#34;</span><span class="p">;</span>
</span></span></code></pre></div><p>3.修改 窗口布局的图标</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="n">Layout</span> <span class="n">layouts</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="cm">/* symbol     arrange function */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;&#34;</span><span class="p">,</span>      <span class="n">tile</span> <span class="p">},</span>    <span class="cm">/* first entry is default */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;缾&#34;</span><span class="p">,</span>      <span class="nb">NULL</span> <span class="p">},</span>    <span class="cm">/* no layout function means floating behavior */</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span> <span class="s">&#34;[M]&#34;</span><span class="p">,</span>      <span class="n">monocle</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>修改完成之后的样子如下
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/dwm-beautty/5.png"
        data-srcset="/dwm-beautty/5.png, /dwm-beautty/5.png 1.5x, /dwm-beautty/5.png 2x"
        data-sizes="auto"
        alt="/dwm-beautty/5.png"
        title="dwm-bar" /></p>
<h3 id="针对终端和程序启动器的简单配置">针对终端和程序启动器的简单配置</h3>
<p>suckless 全家桶本身也有终端<code>st</code>和程序启动器<code>dmenu</code>,也是一贯以极简著称，但是我已经不想在过多的投入精力到这些的配置中了，这里我找到了一些开箱即用的程序作为<code>st</code> <code>dmenu</code>的替代瓶，等有精力和时间了再来折腾他们</p>
<p>这里终端使用<code>alacritty</code> 程序启动器使用<code>rofi</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo pacman -S alacritty rofi
</span></span></code></pre></div><p>可以在这里找到关于<code>alacritty</code> 的配色
<a href="https://github.com/eendroroy/alacritty-theme" target="_blank" rel="noopener noreffer ">alacritty themes</a></p>
<p>从 <code>/usr/share/doc/alacritty/example/alacritty.yml</code> 拷贝一份到<code>~/.config/alacritty/alacritty.yml</code> 作为配置文件，然后找到自己喜欢的配色，修改里面关于color的部分</p>
<p>修改dwm中启动终端的快捷键</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">static</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">termcmd</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#34;alacritty&#34;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">};</span>
</span></span></code></pre></div><p>关于<code>rofi</code>的主题，可以在这个网站中找到 <a href="https://github.com/adi1090x/rofi" target="_blank" rel="noopener noreffer ">rofi theme</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone --depth<span class="o">=</span><span class="m">1</span> https://github.com/adi1090x/rofi.git
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> rofi
</span></span><span class="line"><span class="cl">./setup.sh <span class="c1"># 安装</span>
</span></span></code></pre></div><p>这里以misc里面的simple_kde 主题为例, 在~/.config/rofi/launcher/misc 中有launcher.sh ，找到最后一行</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">rofi -no-lazy-grab -show drun -modi drun -theme <span class="nv">$dir</span>/<span class="s2">&#34;</span><span class="nv">$theme</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>将这行写入dwm的配置文件中，修改最后的路径为对应的<code>.rasi</code>文件</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">static const char *dmenucmd<span class="o">[]</span> <span class="o">=</span> <span class="o">{</span> <span class="s2">&#34;rofi&#34;</span>, <span class="s2">&#34;-no-lazy-grab&#34;</span>,<span class="s2">&#34;-show&#34;</span>, <span class="s2">&#34;drun&#34;</span>, <span class="s2">&#34;-modi&#34;</span>, <span class="s2">&#34;drun&#34;</span>, <span class="s2">&#34;-theme&#34;</span>, <span class="s2">&#34;~/.config/rofi/launchers/misc/kde_simplemenu.rasi&#34;</span>, NULL <span class="o">}</span><span class="p">;</span>
</span></span></code></pre></div><p>最终的效果如下图
<img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/dwm-beautty/6.png"
        data-srcset="/dwm-beautty/6.png, /dwm-beautty/6.png 1.5x, /dwm-beautty/6.png 2x"
        data-sizes="auto"
        alt="/dwm-beautty/6.png"
        title="效果图" /></p>
<p>当然还有一些其他的配置没有做，例如终端透明，标题栏也不算好看。比起一些网上大神的配置来，这些显得还是太朴素了，但是工具这种东西只要够用就行，实在不行还可以照抄其他觉得好的配置。我主要通过这段时间的折腾搞明白了如何从一个裸机一步步的搭建属于自己定制的初步可用的操作系统。以后使用别人的配置如果出现问题了也大概能知道如何处理。</p>
<p>当然，我自己如今自己的机器也不是完全是这样，我主要使用的是YouTube上一个老外自己搞的一个<a href="https://gitlab.com/dwt1/dtos.git" target="_blank" rel="noopener noreffer ">DTOS</a>,也是一个基于archlinux加其他工具配置起来的一个，对于工具我一项的主张是先找到别人好用的配置，然后根据自己的日常使用习惯进行修改，最后形成一套完全贴合自己的版本。在还不了解这个工具的情况从0开始配置一个是耗费时间，二是出现暂时无法解决的问题时会产生退却心理，第三个就是自己独立摸索出来的配置可能并不如一些大神配置的好用，最终可能会降低效率。</p>
<!-- raw HTML omitted -->
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-01-22</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://HaiLateBoy.github.io/posts/dwm-beautty/" data-title="dwm 美化" data-hashtags="arch Linux,dwm,美化,配置"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://HaiLateBoy.github.io/posts/dwm-beautty/" data-hashtag="arch Linux"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://HaiLateBoy.github.io/posts/dwm-beautty/" data-title="dwm 美化"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://HaiLateBoy.github.io/posts/dwm-beautty/" data-title="dwm 美化"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://HaiLateBoy.github.io/posts/dwm-beautty/" data-title="dwm 美化"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/arch-linux/">arch Linux</a>,&nbsp;<a href="/tags/dwm/">dwm</a>,&nbsp;<a href="/tags/%E7%BE%8E%E5%8C%96/">美化</a>,&nbsp;<a href="/tags/%E9%85%8D%E7%BD%AE/">配置</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/2022-books/" class="prev" rel="prev" title="2022 年阅读清单"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>2022 年阅读清单</a>
            <a href="/posts/vim-tutorial-1/" class="next" rel="next" title="vim 从嫌弃到依赖（0）——概述">vim 从嫌弃到依赖（0）——概述<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.121.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://www.masimaro.xyz" target="_blank">Masimaro</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
